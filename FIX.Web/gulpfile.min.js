var gulp=require("gulp"),concat=require("gulp-concat"),uglify=require("gulp-uglify"),del=require("del"),sass=require("gulp-sass"),less=require("gulp-less"),rename=require("gulp-rename"),minify=require("gulp-clean-css"),merge=require("merge-stream"),util=require("gulp-util"),watch=require("gulp-watch"),browserify=require("browserify"),source=require("vinyl-source-stream"),rev=require("gulp-rev"),order=require("gulp-order"),config={srcJs:{"jquery.js":["Scripts/jquery-*.min.js"],"jqueryval.js":["Scripts/jquery.validate*.min.js"],"modernizr.js":["Scripts/modernizr-*.js"],"bootstrap.js":["Scripts/bootstrap.min.js","Scripts/respond.js"],"app.js":["Scripts/app/extension.js","Scripts/app/settings.js","Scripts/app/*.js","Scripts/app/lib/*.js"]},srcCss:["./Content/css/*.css","!./Content/css/loginpage.css","!./Content/css/portal.css"],srcsass:["./Content/sass/styles.scss","./Content/sass/bootstrap.custom.scss"],production:!!util.env.production};gulp.task("clean",function(n){return del(["./Scripts/script.min.js","./Content/style.css","./Scripts/bundles/*"],n)});gulp.task("style",function(){var n=gulp.src(config.srcCss).pipe(concat("style-css.css")),t=gulp.src(config.srcsass).pipe(sass({style:"expanded"})).pipe(concat("style-sass.scss"));return merge(t,n).pipe(order(["style-css.css","style-sass.scss"])).pipe(concat("styles.min.css")).pipe(config.production?minify():util.noop()).pipe(gulp.dest("./Content/"))});gulp.task("script",function(n){var t=config.srcJs;for(var i in t)t.hasOwnProperty(i)&&gulp.src(t[i]).pipe(config.production?uglify().on("error",function(n){gutil.log(gutil.colors.red("[Error]"),n.toString());this.emit("end")}):util.noop()).pipe(concat(i)).pipe(gulp.dest("./Scripts/bundles/"));n()});gulp.task("watch",function(){watch(["./Content/sass/**/*.scss","./Content/css/**/*.css","./Content/less/**/*.less"],function(){gulp.start("style")});watch(["./Scripts/**/*.js","!./Scripts/**/*.min.js","!./Scripts/bundles/*.js"],function(){gulp.start("script")})});gulp.task("browserify",function(){return browserify(["./Scripts/app.js"]).bundle().pipe(source("app.js")).pipe(gulp.dest("./bundle/"))});gulp.task("build",["clean"],function(){config.production?console.log("Building production environment..."):console.log("Building in debug environment...");gulp.start("script","style","watch")});